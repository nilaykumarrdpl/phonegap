<!DOCTYPE html>
<!--
    Copyright (c) 2012-2014 Adobe Systems Incorporated. All rights reserved.

    Licensed to the Apache Software Foundation (ASF) under one
    or more contributor license agreements.  See the NOTICE file
    distributed with this work for additional information
    regarding copyright ownership.  The ASF licenses this file
    to you under the Apache License, Version 2.0 (the
    "License"); you may not use this file except in compliance
    with the License.  You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing,
    software distributed under the License is distributed on an
    "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
     KIND, either express or implied.  See the License for the
    specific language governing permissions and limitations
    under the License.
-->
<html>
    <head>
        <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
        <meta charset="utf-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="msapplication-tap-highlight" content="no" />
        <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
        <!--<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, target-densitydpi=medium-dpi, user-scalable=0" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Kazo.com</title>
        <style>
            .container {
                width: 100%;
                height: 0;
            }
            .video {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }
            .loader-iframe {display:none;}
            @media all and (min-width:200px) and (max-width:320px) {            
                .device-200-320{display:block;width: 100%;}
                .device-320-480{display:none;}
                .device-480-800{display:none}
                .device-720-1280{display:none}
            }
            @media all and (min-width:320px) and (max-width:480px) {            
                .device-200-320{display:none;}
                .device-320-480{display:block;width: 100%;}
                .device-480-800{display:none}
                .device-720-1280{display:none}
            }
            @media all and (min-width:480px) and (max-width:800px) {            
                .device-200-320{display:none;}
                .device-320-480{display:none;}
                .device-480-800{display:block;width: 100%;}
                .device-720-1280{display:none}
            }
            @media all and (min-width:720px) and (max-width:1280px) {            
                .device-200-320{display:none;}
                .device-320-480{display:none;}
                .device-480-800{display:none}
                .device-720-1280{display:block;width: 100%;}
            }
        </style>
        <style>
            @font-face {
              font-family: 'FontAwesome';
              src: url('fonts/fontawesome-webfont.eot?v=4.5.0');
              src: url('fonts/fontawesome-webfont.eot?#iefix&v=4.5.0') format('embedded-opentype'), url('fonts/fontawesome-webfont.woff2?v=4.5.0') format('woff2'), url('fonts/fontawesome-webfont.woff?v=4.5.0') format('woff'), url('fonts/fontawesome-webfont.ttf?v=4.5.0') format('truetype'), url('fonts/fontawesome-webfont.svg?v=4.5.0#fontawesomeregular') format('svg');
              font-weight: normal;
              font-style: normal;
            }
            .fa-navicon::before, .fa-reorder::before, .fa-bars::before {    content: "\f0c9";	font-size: 25px;	margin-left: 3px;	color:#999999;}


            .fa {
              display: inline-block;
              font: normal normal normal 14px/1 FontAwesome;
              font-size: inherit;
              text-rendering: auto;
              -webkit-font-smoothing: antialiased;
              -moz-osx-font-smoothing: grayscale;
            }

            .fa-cart-plus:before {
              content: "\f217";
             font-size: 28px;
              margin:-6px 0 0 3px !important;
              color:#999999;
            }
            .fa-navicon::before, .fa-reorder::before, .fa-bars::before {
                content: "\f0c9";
                font-size: 25px;
                margin-left: 3px;
                color:#999999;
            }

            .fa-user:before {
              content: "\f007";
              font-size: 24px;
              margin-left: 6px;
              color:#999999;
            }
            .fa-facebook-square:before {
              content: "\f082";
              font-size: 28px;
              margin-left: 6px;
              color:#797979;
            }
            .fa-ellipsis-v:before {
              content: "\f142";
            }


            @media all and (min-width:200px) and (max-width:640px) {

            .header-main-inner-sects {
                height: 30px;
                margin: 0 auto;
                padding: 8px 0;
                width: 94%;
            }
            body .header-language-background{background:#000; position:relative; z-index:99999; height:47px;}
            body{margin:0;padding:0;}
            .header-main-part {    background: #000 none repeat scroll 0 0;    height: auto;}
            .device-logo {    display: none;}
            body .header-language-background{padding:0!important;}
            .header-language-background .header-main-part #header-search {    padding: 15px 0 !important;    width: 100% !important;display:none;}
            .left-icon-area-sec {float: right;    width: 50%;}
            .header-main-part .slide-header {    display: block;    float: left;    width: 50%;}
            .app-logo {    float: left; margin: 0 11%;margin-top:3px;}
            .skip-links {    float: left;}
            .fa-navicon::before, .fa-reorder::before, .fa-bars::before{color:#fff;}
            .app-logo > img {    width: auto;height:18px;}
            .srch-head-app .fa.fa-search {    color: #fff;    font-size: 22px;}
            .fa-search::before { content: "\f002";}
            .internal-menu-bars {    display: none;}
            .cms-index-index .skip-link{background:none !important;}
            .left-icon-area-sec .header-minicart {    float: left;margin: -3px 22%;}
            .left-icon-area-sec .header-miniacnt {    float: left;}
            .left-icon-area-sec .fa-cart-plus::before{color:#fff;}
            .left-icon-area-sec .fa-user::before{color:#fff;}
            .left-icon-area-sec .eliipsiis { color:#fff;   float: right;}
            .eliipsiis .fa.fa-ellipsis-v {    color: #fff;    font-size: 23px;}
            .eliipsiis .internal-menu-bars {    border: medium none;height: auto;max-height: 80%;overflow-y: scroll;position: fixed;right: 0;top: 47px;width: 50%;background:#fff}
            .header-main-part .slide-header #header-nav {    width: 205px !important; left: 0% !important;position:fixed;top: 47px !important;background:#fff;}
            .header-language-background #header-search {   background: #000000;    width: 100% !important; padding: 16px 0 !important;position: absolute;top:39px}
            form#search_mini_form {    background: #fff;    border-radius: 5px;    margin: 0 auto;    overflow: hidden;    width: 80%;}
            #search {background: #fff ;color: #000;  height: 30px;border:none;padding: 0 0 0 5%;    width: 76%;}
            #search_mini_form .button.search-button {    background: rgba(0, 0, 0, 0) none repeat scroll 0 0 !important;    display: block;height: 30px;padding: 0 !important;width:27px;}
            form#search_mini_form .fa.fa-search {    color: #797979;    font-size: 20px;}
             .main-container{padding-top: 39px !important;}
            .internal-menu-bars li {    border-bottom: 1px solid #dadada;    padding: 15px 2px 10px 10px;}
            form#search_mini_form #advice-required-entry-search {    display: none;}
            .left-icon-area-sec .header-miniacnt #header-account{display:none;top:39px !important;}
            .left-icon-area-sec .header-miniacnt #header-cart{top:39px !important;}
            .eliipsiis {    display: block;}
            .app-logo {    display: block;}
            .srch-head-app {    display: block;}
            button .fa.fa-search {    display: block;}
            .skip-links {    float: left;    width: 28px;display:block !important;}
            .left-icon-area-sec #header-cart{top:42px !important; z-index: 2147483647;}
            .video-container {float: left;    height: auto!important;   overflow: hidden;    padding-bottom: 0;    padding-top: 0;    position: static!important;    width: 100%;}
            .video-container iframe, .video-container object, .video-container embed{position:static !important;}
            .collectionContainer{margin-top:5px !important;}
             p {    margin: 0!important;}
             .collection li{    margin: 0!important;}
            .collectionContainer ul li img {    display: block;    margin: 10px 0 !important;}
             .collection li a{    margin: 0!important;}
            #load_light{ background: #fff ;float: left;height: 100%;left: 0 !important;overflow: hidden;text-align: center;width: 100%; z-index: 9999;}
            #load_light .loading_image img{margin:0 auto!important;padding-left: 5%;}
            .left-icon-area-sec .header-minicart a.skip-cart.no-count {background: rgba(0, 0, 0, 0) none repeat scroll 0 0;}
            .button.search-button .fa.fa-search {    margin-top: 3px;}
            #load_light .loading_image {    position: absolute;    top: 25% !important; width:100%;}
            .loading_image span {color: #000!important;display: block;    text-align: center !important;    width: 100%;font-family: Verdana,Arial,sans-serif;font-size: 12px;line-height: 1.5; margin-top:-3px;}
            body .login_access{width:280px !important;  }
            .loader-div{z-index:99;}
            .loader-iframe{z-index:9999;}
            }}
        </style>        
        <link rel="apple-touch-icon" href="icon.png">
    </head>
    <body  onload="onLoad()">
        <div class="container" id="container">
            <iframe frameborder="0" id="MyIFrame" class="video loader-iframe"></iframe>       
            <div class="video loader-div">
                <div class="header-language-background">
                  <div class="header-language-container">
                    <div class="header-main-part">
                      <div class="header-main-inner-sects">
                        <!-- Cart -->
                        <div class="left-icon-area-sec">
                          <div class="header-minicart"> <a class="skip-link skip-cart  no-count" href="#header-cart"> <i class="fa fa-cart-plus"></i>  </a>
                            <div class="block block-cart skip-content" id="header-cart">
                              <div class="minicart-message" id="minicart-error-message"></div>
                              <div class="minicart-message" id="minicart-success-message"></div>
                            </div>
                          </div>
                          <div class="header-miniacnt">
                            <div class="mobile-hidden-part" style="display: none;"> <a class="skip-link skip-account" href="#header-account"> <i class="fa fa-user"></i> <span class="label">Account</span> </a> </div>
                            <div> <a class="signin mobile-navigation" href="javascript:void(0)"> <i class="fa fa-user"></i> </a> </div>
                            <!-- Account -->
                            <div class="skip-content" id="header-account">
                              
                            </div>
                          </div>
                          <div class="eliipsiis"> <a class="top-app-navig" href="javascript:void(0);"> <i class="fa fa-ellipsis-v"></i></a> </div>
                        </div>
                        <div class="slide-header">
                          <!-- Navigation -->
                          <div class="store-language-container"></div>
                          <!-- Skip Links -->
                          <div class="skip-links"> <a class="common-toggle" href="#header-nav"> <i class="fa fa-navicon"></i>  </a> </div>
                          <!-- Search -->
                          <a class="logo-loader" href="http://54.169.245.192/kazo/">
                          <div class="app-logo"> <img src="fonts/k.jpg"> </div>
                          </a>
                          <div class="srch-head-app"><a href="javascript:void(0);"><i class="fa fa-search"></i></a></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="loading_mask" id="load_light" style="position: fixed; top: 0px; left: 0px;">
                    <div class="loading_image">
                    <div class="progress-bar-validation">
                    <img alt="loading your required product" src="http://54.169.245.192/kazo/skin/frontend/rwd/kazo/images/loading_p.gif">
                    <span> Loading... Please wait </span>
                    </div>
                    <button onClick="connectSocialLogin()">Facebook Login</button> <br /><br /> OR <br /><br />
                    <form id="login-access-form" method="post" name="login-access-form">
                      <span>Members Login Here</span>
                      <input type="hidden" name="form_type" value="signin" />
                      <input type="email" name="email" id="email" value="" placeholder="Email Address" required><br />
                      <input type="password" placeholder="Password" name="password" id="password" required><br /><br />
                      <button id="submit" name="submit" title="sigin" class="button" type="button" onClick="connectByEmail()"><span><span>Submit</span></span></button>
                    </form>
                    <form id="forgot-password-form" method="post" name="forgot-password-form" style="display:none;">
                      <span>Forgot Your Password?</span>
                      <input type="hidden" name="form_type" value="forgot-password" />
                      <input type="email" name="email" id="email_f" value="" placeholder="Email Address" required><br />
                      <button id="submit" name="submit" title="forgot-password" class="button" type="button" onClick="sendPasswordByEmail()"><span><span>Submit</span></span></button>
                    </form>
                    <form id="register-form" method="post" name="register-form" style="display:none;">
                      <span>Register Here</span>
                      <input type="hidden" name="form_type" value="register" />
                      <input type="text" name="firstname" id="firstname_r" value="" placeholder="First Name" required><br />
                      <input type="text" name="lastname" id="lastname_r" value="" placeholder="Last Name" required><br />
                      <input type="tel" name="mobile" id="mobile_r" value="" placeholder="Mobile Number" required maxlength="10"><br />
                      <input type="email" name="email" id="email_r" value="" placeholder="Email Address" required><br />
                      <input type="password" name="password" placeholder="Password" id="password_r" required=""><br />
                      <input type="password" name="confirm_password" placeholder="Confirm Password" id="confirm_password_r" required=""><br />
                      <button id="submit" name="submit" title="forgot-password" class="button" type="button" onClick="registerByEmail()"><span><span>Submit</span></span></button>
                    </form>
                    <br />
                      <a id="login-access-link" href="javascript::void();" style="color:#ff9900; text-decoration:underline;font-size:12px; padding:10px 0 0 10px">Sign In</a>&nbsp;
                      <a id="register-link" href="javascript::void();" style="color:#ff9900; text-decoration:underline;font-size:12px; padding:10px 0 0 10px">New User</a>&nbsp;
                      <a id="forgot-password-link" href="javascript::void();" style="color:#ff9900; text-decoration:underline;font-size:12px; padding:10px 0 0 10px">Forgot Password</a>
                    </div>
                </div>
            </div>

        </div>
        <div class="container-offline" style="display:none">
            No network connection ...
        </div>        
        <script type="text/javascript" src="cordova.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
        <script type="text/javascript" charset="utf-8">
        $(document).ready(function(){
            $('#forgot-password-link').click(function(){
                $('#register-form').hide();
                $('#login-access-form').hide();
                $('#forgot-password-form').show();
            });
            $('#register-link').click(function(){
                $('#register-form').show();
                $('#login-access-form').hide();
                $('#forgot-password-form').hide();
            });
            $('#login-access-link').click(function(){
                $('#register-form').hide();
                $('#login-access-form').show();
                $('#forgot-password-form').hide();
            });
        });
        // Call onDeviceReady when Cordova is loaded.
        //
        // At this point, the document has loaded but cordova-1.7.0.js has not.
        // When Cordova is loaded and talking with the native device,
        // it will call the event `deviceready`.
        // 
        function onLoad() {
            document.addEventListener("deviceready", onDeviceReady , false);
        }
        // device APIs are available
        //
        var pushNotification;
        function onDeviceReady() {
                alert('progress-bar-validation');
                $('.progress-bar-validation').hide();
                var push = PushNotification.init({ "android": {"senderID": "267514034297", "icon": "phonegap", "iconColor": "blue"},
         "ios": {"alert": "true", "badge": "true", "sound": "true"}, "windows": {} } );
         push.on('registration', function(data) {
            console.log(data.registrationId);
            $("#gcm_id").html(data.registrationId);
            var deviceId = data.registrationId;
            $.ajax({
              type: 'GET',
              url: 'http://54.169.245.192/kazo/script/gcm/getJson.php',
              dataType: 'jsonp',
              async: false,
              jsonpCallback: 'jsoncallback',
              crossDomain: true,
              data: {deviceId:deviceId},
              cache: false,
            }); 
        });
        push.on('notification', function(data) {
            console.log(data.message);
            alert(data.title+" Message: " +data.message+" image: " +data.image);
            // data.title,
            // data.count,
            // data.sound,
            // data.image,
            // data.additionalData
        });
                //checkConnection();
                $('.device-ready').hide();
                $('.loader-div').show();
                //alert('Device is ready')
        }

        var fbLoginSuccess = function (userData) 
        {
            alert("UserInfo: " + JSON.stringify(userData));
            facebookConnectPlugin.getAccessToken(function(token) 
            {
                alert("Token: " + token);
            }, function(err) {
                alert("Could not get access token: " + err);
            }); 
            alert(userData.authResponse.userID);
            facebookConnectPlugin.api(userData.authResponse.userID+"/?fields=id,email,name", ["user_birthday"],
            function (result) 
            {
                /* alerts:
                    {
                        "id": "000000123456789",
                        "email": "myemail@example.com"
                    }
                */
                alert("Result: " + JSON.stringify(result));
                var accessToken = userData.authResponse.accessToken;
                var ID = result.id;
                var email = result.email;
                var name = result.name;
                $.ajax({
                  type: 'GET',
                  url: 'http://54.169.245.192/kazo/script/gcm/getUser.php',
                  dataType: 'jsonp',
                  async: false,
                  jsonpCallback: 'jsoncallbackUser',
                  crossDomain: true,
                  data: {accessToken:accessToken,ID:ID,email:email,name:name},
                  cache: false,
                }); 
            },
            function (error) 
            {
                alert("Failed: " + error);
            });
        }
        
        function jsoncallbackUser(data)
        {
            if($.trim(data) == "false") {
              alert("Fail to recived data");
            }
            else {
              alert("Successfully data recived");
              //onload, call loadIframe() function
                /*var id = 'container';
                var parentElement = document.getElementById(id);
                var listeningElement = parentElement.querySelector('.loader-div');
                var receivedElement = parentElement.querySelector('.loader-iframe');

                listeningElement.setAttribute('style', 'display:none;');
                receivedElement.setAttribute('style', 'display:block;');*/
                alert(data.user_detail.email);
                //loadIframe('nilay.lucky4u@gmail.com'); 
                loadIframe(data.user_detail.email); 
              //alert(data);
              //var obj = $.parseJSON( data );
              //alert( data.message );
            }        
          //alert( 'hello'+data.message );
        }
        function connectSocialLogin() {
                alert('ahhaa');
                //$('.loader-iframe').addClass('video');
                facebookConnectPlugin.login(["public_profile","email", "user_birthday"],
                    fbLoginSuccess,
                    function (error) { alert("" + error) }
                );
        }
        
        function connectByEmail() {
                $('.progress-bar-validation').show();
                var email = $('#email').val();
                var password = $('#password').val();
                if(email == ''){alert('Please enter your email');$('#email').focus();return;}
                if(password == ''){alert('Please enter your password');$('#password').focus();return;}
                var formId = '#login-access-form';
                var form = $(formId); 
                var params = form.serialize();
                //alert(params);
                $.ajax({
                  type: 'GET',
                  url: 'http://54.169.245.192/kazo/connectedByEmail.php',
                  dataType: 'jsonp',
                  async: false,
                  jsonpCallback: 'jsoncallbackConnectedByEmail',
                  crossDomain: true,
                  data: params,
                  cache: false,
                });                 
        }
        function sendPasswordByEmail() {
                $('.progress-bar-validation').show();
                var email = $('#email_f');
                if (!validateEmail(email.val())) { alert('Invalid Email Address');email.focus();return;}
                var formId = '#forgot-password-form';
                var form = $(formId); 
                var params = form.serialize();
                //alert(params);
                $.ajax({
                  type: 'GET',
                  url: 'http://54.169.245.192/kazo/connectedByEmail.php',
                  dataType: 'jsonp',
                  async: false,
                  jsonpCallback: 'jsoncallbackConnectedByEmail',
                  crossDomain: true,
                  data: params,
                  cache: false,
                });                 
        }
        function registerByEmail() {
                var formId = '#register-form';
                var firstname_r = $('#firstname_r');
                var lastname_r = $('#lastname_r');
                var mobile_r = $('#mobile_r');
                var email = $('#email_r');
                var password_r = $('#password_r');
                var confirm_password_r = $('#confirm_password_r');
                if(firstname_r.val() == ''){alert('Please enter your firstname');firstname_r.focus();return;}
                if(lastname_r.val() == ''){alert('Please enter your lastname');lastname_r.focus();return;}
                if(!validatePhone(mobile_r.val())){alert('Please enter a valid number');mobile_r.focus();return;}
                if (!validateEmail(email.val())) { alert('Invalid Email Address');email.focus();return;}
                if(password_r.val() == '' || password_r.val().length <6){alert('Please enter 6 or more characters.');password_r.focus();return;}
                if(password_r.val() != confirm_password_r.val()){alert('Please make sure your passwords match');confirm_password_r.focus();return;}

                var form = $(formId); 
                var params = form.serialize();
                alert(params);
                $.ajax({
                  type: 'GET',
                  url: 'http://54.169.245.192/kazo/connectedByEmail.php',
                  dataType: 'jsonp',
                  async: false,
                  jsonpCallback: 'jsoncallbackConnectedByEmail',
                  crossDomain: true,
                  data: params,
                  cache: false,
                });                 
        }
        // Function that validates email address through a regular expression.
        function validateEmail(sEmail) {
            var filter = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
            if (filter.test(sEmail)) {
            return true;
            }
            else {
            return false;
            }
        }
        // Function that validates phone number through a regular expression.
        function validatePhone(sPhone) {
            var filter = /[0-9 -()+]+$/;
            if (filter.test(sPhone) && (sPhone.length >= 10)) {
            return true;
            }
            else {
            return false;
            }
        }
        function jsoncallbackConnectedByEmail(data) {
            //alert('Recieved');
            var result1 = JSON.stringify(data);
            $('.progress-bar-validation').hide();
            if(!data.error) {
                //alert(data.htmlData.email);
                if(data.form_type == 'forgot-password'){
                    alert(JSON.stringify(data.htmlData));
                }else{
                    loadIframe(data.htmlData.email);
                }
            } else {
                alert(data.htmlData);
            }
        }
        
        function loadIframe(email){
            $('.loader-iframe').css("display", "block");
            $( ".loader-div" ).remove();
        
            var iframeURL = 'http://54.169.245.192/kazo/autoLogin.php';
            var iframeID = 'MyIFrame';
            var password = '12345678';

            //setiFrame's SRC attribute
            var iFrameWin = document.getElementById(iframeID);
            iFrameWin.src = iframeURL + "?email="+email+"&password="+password;
            //alert(iFrameWin.src);
        }

        function checkConnection() {
            var  networkConnectionType =  navigator.network.connection.type;
            alert('Connection Type: ' +  networkConnectionType );
            if(networkConnectionType === 'none' || networkConnectionType === null || networkConnectionType === "unknown"){
                $('.container').hide();
                $('.container-offline').show();
           }
        }
        </script>
        <script>
        function jsoncallback(data)
        {
            if($.trim(data) == "false") {
              alert("Fail to recived data");
            }
            else {
              alert("Successfully data recived");
              //alert(data);
              //var obj = $.parseJSON( data );
              //alert( data.message );
            }        
          //alert( 'hello'+data.message );
        }
        </script>
    </body>
</html>
